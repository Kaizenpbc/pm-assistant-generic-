# OAuth 2.1 proxy rules for MCP server
# Add these to the .htaccess in /home/kaizenmo/pm.ca/ (or the subdomain document root)
# These must come BEFORE the existing /mcp proxy rule.

# OAuth discovery endpoints
RewriteRule ^\.well-known/oauth-(.*)$ http://127.0.0.1:3100/.well-known/oauth-$1 [P,L]

# OAuth authorization endpoints
RewriteRule ^authorize(.*)$ http://127.0.0.1:3100/authorize$1 [P,L]

# OAuth token endpoint
RewriteRule ^token$ http://127.0.0.1:3100/token [P,L]

# OAuth dynamic client registration
RewriteRule ^register$ http://127.0.0.1:3100/register [P,L]

# OAuth token revocation
RewriteRule ^revoke$ http://127.0.0.1:3100/revoke [P,L]

# Existing MCP endpoint (should already be present)
# RewriteRule ^mcp$ http://127.0.0.1:3100/mcp [P,L]
